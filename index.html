<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FORTNITE SKIN BATTLE: ¬°DERROTA AL JEF√â!</title>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Oxanium:wght@600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Oxanium', sans-serif;
      color: white;
      text-align: center;
      margin: 0;
      padding: 10px;
      background: #0a0a1a;
      position: relative;
      overflow-x: hidden;
      min-height: 100vh;
    }
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: radial-gradient(ellipse at center, #1a1a2e 0%, #0a0a1a 70%);
      z-index: -3;
    }
    body::after {
      content: '';
      position: fixed;
      top: 15%; right: 8%;
      width: 350px; height: 350px;
      background: radial-gradient(circle, rgba(106, 27, 154, 0.3) 0%, transparent 70%);
      border-radius: 50%;
      filter: blur(30px);
      animation: pulseGlow 8s infinite alternate;
      z-index: -2;
    }
    @keyframes pulseGlow { 0% { opacity: 0.4; transform: scale(1); } 100% { opacity: 0.8; transform: scale(1.1); } }
    .particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
    .particle { position: absolute; border-radius: 50%; animation: float 15s infinite linear; }
    @keyframes float { to { transform: translate(var(--tx), var(--ty)) rotate(360deg); opacity: 0; } }

    .content { position: relative; z-index: 10; opacity: 0; animation: fadeIn 1.5s forwards; }
    @keyframes fadeIn { to { opacity: 1; } }

    h1 {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 2.2em;
      color: #ff6b6b;
      text-shadow: 0 0 15px rgba(255,107,107,0.8);
      margin: 10px 0;
    }

    .rarity-badge {
      position: absolute;
      top: 8px;
      right: 8px;
      font-size: 0.7em;
      font-weight: bold;
      padding: 2px 6px;
      border-radius: 10px;
      background: rgba(0,0,0,0.6);
    }
    .rarity-common .rarity-badge { color: white; }
    .rarity-rare .rarity-badge { color: #ff6b35; }
    .rarity-epic .rarity-badge { color: #a29bfe; }
    .rarity-legendary .rarity-badge { 
      color: transparent;
      background: linear-gradient(45deg, red, gold, blue, purple);
      -webkit-background-clip: text;
      background-clip: text;
      animation: rainbow 3s linear infinite;
    }
    @keyframes rainbow { 0% { background-position: 0% 50%; } 100% { background-position: 100% 50%; } }

    .card {
      background: rgba(20,20,40,0.8);
      border-radius: 12px;
      padding: 12px;
      margin: 10px;
      display: inline-block;
      width: 140px;
      cursor: pointer;
      transition: transform 0.2s;
      position: relative;
      border: 2px solid #333;
    }
    .card.fainted {
      opacity: 0.4;
      filter: grayscale(100%);
      cursor: not-allowed;
    }
    .card img {
      width: 100%;
      border-radius: 8px;
    }

    .rarity-common { border-color: white; box-shadow: 0 0 8px rgba(255,255,255,0.4); }
    .rarity-rare { border-color: #ff6b35; box-shadow: 0 0 12px rgba(255,107,53,0.6); }
    .rarity-epic { border-color: #a29bfe; box-shadow: 0 0 15px rgba(162,155,254,0.7); }
    .rarity-legendary { 
      border-color: gold;
      box-shadow: 0 0 20px gold;
      animation: legendaryGlow 2s infinite alternate;
    }
    @keyframes legendaryGlow {
      0% { box-shadow: 0 0 15px gold; }
      100% { box-shadow: 0 0 25px gold, 0 0 35px rgba(255,0,0,0.5), 0 0 35px rgba(0,0,255,0.5); }
    }

    .enemy-card .card {
      transform: scale(1.1);
      position: relative;
    }

    .attack-effect {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      pointer-events: none;
      z-index: 10;
    }
    .fire { background: radial-gradient(circle, rgba(255,90,0,0.7) 0%, transparent 70%); animation: fireBurst 0.8s forwards; }
    .ice { background: radial-gradient(circle, rgba(0,200,255,0.6) 0%, transparent 70%); animation: iceShatter 0.8s forwards; }
    .wind { background: radial-gradient(circle, rgba(100,255,200,0.5) 0%, transparent 70%); animation: windSwirl 0.8s forwards; }
    .arcane { background: radial-gradient(circle, rgba(200,100,255,0.7) 0%, transparent 70%); animation: arcanePulse 0.8s forwards; }

    @keyframes fireBurst { 0% { opacity: 0.8; transform: scale(0.5); } 100% { opacity: 0; transform: scale(2); } }
    @keyframes iceShatter { 0% { opacity: 0.9; transform: scale(0.3); } 50% { opacity: 0.9; } 100% { opacity: 0; transform: scale(1.5); } }
    @keyframes windSwirl { 0% { opacity: 0.7; transform: rotate(0) scale(0.5); } 100% { opacity: 0; transform: rotate(180deg) scale(2); } }
    @keyframes arcanePulse { 0% { opacity: 0.9; transform: scale(0.4); box-shadow: 0 0 10px #c864ff; } 50% { box-shadow: 0 0 20px #ff64c8, 0 0 30px #64c8ff; } 100% { opacity: 0; transform: scale(1.8); } }

    .battle-area {
      margin: 20px auto;
      max-width: 600px;
      background: rgba(10,10,26,0.6);
      border-radius: 15px;
      padding: 20px;
      border: 2px solid #4ecdc4;
    }
    .battle-log {
      background: rgba(0,0,0,0.5);
      padding: 12px;
      border-radius: 10px;
      margin: 15px 0;
      min-height: 80px;
      font-size: 1.1em;
      color: #feca57;
    }
    .action-btn {
      background: #4ecdc4;
      color: #0a0a1a;
      border: none;
      padding: 10px 20px;
      font-size: 1.1em;
      font-weight: bold;
      border-radius: 50px;
      cursor: pointer;
      margin: 10px 5px;
      transition: all 0.3s;
    }
    .action-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    }

    .coming-soon {
      margin: 40px auto;
      max-width: 500px;
      background: rgba(0,0,0,0.4);
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      border: 2px dashed gold;
    }
    .coming-soon h3 {
      color: gold;
      font-family: 'Bebas Neue';
    }

    @media (max-width: 500px) {
      .card { width: 120px; }
      h1 { font-size: 1.9em; }
    }
  </style>
</head>
<body>
  <div class="particles" id="particles"></div>
  <div class="content">
    <h1>FORTNITE SKIN BATTLE: ¬°DERROTA AL JEF√â!</h1>
    
    <div class="battle-area" id="battleArea">
    </div>

    <!-- ‚ú® PR√ìXIMA ACTUALIZACI√ìN: MA√ëANA A LAS 15:00 ‚ú® -->
    <div class="coming-soon">
      <h3>üîî ¬°PR√ìXIMA ACTUALIZACI√ìN! üîî</h3>
      <p><strong>Ma√±ana a las 15:00</strong></p>
      <p>¬°Llegan los <span style="color:gold; font-weight:bold;">Cofres √âpicos</span>! üéÅ</p>
      <p>Obt√©n skins raras, mejoras y m√°s.</p>
      <div id="updateTimer" style="font-size:1.3em; color:#4ecdc4; margin:10px 0; font-weight:bold;"></div>
    </div>
  </div>

  <audio id="hitSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3" preload="auto"></audio>
  <audio id="loseSound" src="https://assets.mixkit.co/sfx/preview/mixkit-retro-arcade-lose-2027.mp3" preload="auto"></audio>
  <audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" preload="auto"></audio>

  <script>
    function createParticles() {
      const c = document.getElementById('particles');
      const n = window.innerWidth > 768 ? 25 : 15;
      for (let i = 0; i < n; i++) {
        const p = document.createElement('div');
        p.className = 'particle';
        const s = Math.random() * 4 + 1;
        p.style.width = p.style.height = `${s}px`;
        p.style.left = `${Math.random() * 100}%`;
        p.style.top = `${Math.random() * 100}%`;
        const cols = ['rgba(255,107,107,0.7)','rgba(78,205,196,0.7)','rgba(254,202,87,0.7)'];
        p.style.background = cols[Math.floor(Math.random() * cols.length)];
        p.style.setProperty('--tx', `${(Math.random()-0.5)*200}px`);
        p.style.setProperty('--ty', `${(Math.random()-0.5)*200}px`);
        p.style.animationDuration = `${15 + Math.random() * 20}s`;
        c.appendChild(p);
      }
    }

    // üÉè CARTAS CON VIDAS
    const CARDS = [
      { id:0, name:"Ram√≠rez", img:"https://s93.erome.com/5472/K3IRZbxx/Y8DPmT76.jpeg?v=1764825894", rarity:"common", atk:60, def:50, power:"Paso Firme", attackType:"wind" },
      { id:1, name:"Azulita", img:"https://s93.erome.com/5472/K3IRZbxx/0B8OzReu.jpeg?v=1764815871", rarity:"rare", atk:70, def:55, power:"Confeti √Åcido", attackType:"fire" },
      { id:2, name:"Tormenta", img:"https://s93.erome.com/5472/K3IRZbxx/7GmdJa3U.jpeg?v=1764802552", rarity:"epic", atk:80, def:45, power:"Torbellino", attackType:"wind" },
      { id:3, name:"Fortaleza", img:"https://s93.erome.com/5472/K3IRZbxx/1FvcJ5u7.png?v=1764809177", rarity:"rare", atk:60, def:70, power:"Muralla", attackType:"ice" },
      { id:4, name:"Danza", img:"https://s93.erome.com/5472/K3IRZbxx/0VxSvgAl.jpeg?v=1764818017", rarity:"epic", atk:75, def:50, power:"Baile √âpico", attackType:"wind" },
      { id:5, name:"Furia", img:"https://s93.erome.com/5472/K3IRZbxx/LsMURibY.jpeg?v=1764812622", rarity:"legendary", atk:90, def:40, power:"Ira Incontenible", attackType:"fire" },
      { id:6, name:"Escudera", img:"https://s93.erome.com/5472/K3IRZbxx/9RweIpam.jpeg?v=1764813677", rarity:"common", atk:55, def:65, power:"Protecci√≥n", attackType:"ice" },
      { id:7, name:"Asesina", img:"https://s206.erome.com/4699/lpRzYjBO/Z5Tc5k2v.jpeg?v=1745795818", rarity:"legendary", atk:95, def:30, power:"Golpe Letal", attackType:"fire" },
      { id:8, name:"Guardiana", img:"https://s206.erome.com/4699/lpRzYjBO/P9p2wv5y.jpeg?v=1745795818", rarity:"epic", atk:50, def:80, power:"Escudo Energ√©tico", attackType:"ice" },
      { id:9, name:"JEFE FINAL", img:"https://s206.erome.com/4699/lpRzYjBO/gU2HfmRY.jpeg?v=1745795818", rarity:"legendary", atk:100, def:35, power:"Tirano", attackType:"arcane" }
    ];

    let playerCards = [];
    let enemyCard = null;
    let round = 1;
    let gameActive = true;
    let playerTurn = true; // true = tu turno, false = IA

    function renderCard(card, isEnemy = false, isFainted = false) {
      const rarityClass = `rarity-${card.rarity} ${isFainted ? 'fainted' : ''}`;
      const rarityName = { common:"Com√∫n", rare:"Rara", epic:"√âpica", legendary:"Legendaria" };
      return `
        <div class="card ${rarityClass}" style="${isEnemy ? 'transform:scale(1.1);' : ''}">
          <div class="rarity-badge">${rarityName[card.rarity]}</div>
          <img src="${card.img}" alt="${card.name}">
          <div class="stats">ATK: ${card.atk} | DEF: ${card.def}</div>
          <div class="power">${card.power}</div>
        </div>
      `;
    }

    function playAttackAnimation(type, targetElement) {
      const effect = document.createElement('div');
      effect.className = `attack-effect ${type}`;
      targetElement.style.position = 'relative';
      targetElement.appendChild(effect);
      setTimeout(() => {
        if (effect.parentNode) effect.parentNode.removeChild(effect);
      }, 800);
    }

    function startBattle() {
      const nonBoss = CARDS.slice(0, -1);
      playerCards = [];
      const pool = [...nonBoss];
      while (playerCards.length < 3 && pool.length > 0) {
        const idx = Math.floor(Math.random() * pool.length);
        playerCards.push({...pool.splice(idx, 1)[0], alive: true});
      }
      const enemyIndex = Math.min(round + 3, 9);
      enemyCard = {...CARDS[enemyIndex], alive: true};
      playerTurn = true;
      renderBattle();
    }

    function renderBattle() {
      if (!gameActive) return;
      let html = `<div class="enemy-card">${renderCard(enemyCard, true, !enemyCard.alive)}</div>`;
      html += `<div class="battle-log" id="battleLog">`;
      if (playerTurn) {
        html += `¬°Tu turno! Elige una carta para atacar:`;
      } else {
        html += `¬°Turno de la IA!`;
      }
      html += `</div>`;
      html += `<div class="player-hand">`;
      playerCards.forEach((card, i) => {
        if (card.alive) {
          html += `<div onclick="playerAttack(${i})">${renderCard(card, false, false)}</div>`;
        } else {
          html += renderCard(card, false, true);
        }
      });
      html += `</div>`;
      document.getElementById('battleArea').innerHTML = html;
    }

    function playerAttack(cardIndex) {
      if (!gameActive || !playerTurn || cardIndex >= playerCards.length || !playerCards[cardIndex].alive) return;
      
      const playerCard = playerCards[cardIndex];
      const log = document.getElementById('battleLog');
      const enemyEl = document.querySelector('.enemy-card .card');

      let playerAtk = playerCard.atk;
      let enemyDef = enemyCard.def;

      const damage = Math.max(5, playerAtk - enemyDef);
      log.innerHTML = `¬°${playerCard.name} ataca con <strong>${playerCard.power}</strong>!`;

      if (enemyEl) {
        playAttackAnimation(playerCard.attackType, enemyEl);
        document.getElementById('hitSound').play().catch(()=>{});
      }

      setTimeout(() => {
        // Si derrotas al enemigo
        if (damage >= enemyCard.def) {
          enemyCard.alive = false;
          log.innerHTML = `¬°${playerCard.name} derrot√≥ a ${enemyCard.name}!`;
          round++;
          if (round > 5) {
            endGame(true);
            return;
          }
          setTimeout(() => startBattle(), 1500);
        } else {
          // La IA contraataca
          log.innerHTML += `<br>¬°La IA contraataca!`;
          setTimeout(() => iaAttack(), 1000);
        }
        playerTurn = false;
      }, 800);
    }

    function iaAttack() {
      if (!gameActive || playerTurn) return;
      
      const log = document.getElementById('battleLog');
      const aliveCards = playerCards.filter(c => c.alive);
      
      if (aliveCards.length === 0) {
        endGame(false);
        return;
      }

      // Elegir carta al azar para atacar
      const targetIndex = Math.floor(Math.random() * aliveCards.length);
      const targetCard = aliveCards[targetIndex];
      const playerDef = targetCard.def;
      const enemyAtk = enemyCard.atk;

      const damage = Math.max(5, enemyAtk - playerDef);
      log.innerHTML = `¬°${enemyCard.name} ataca a ${targetCard.name}!`;

      const playerEl = document.querySelectorAll('.player-hand .card')[playerCards.indexOf(targetCard)];
      if (playerEl) {
        playAttackAnimation(enemyCard.attackType, playerEl);
        document.getElementById('hitSound').play().catch(()=>{});
      }

      setTimeout(() => {
        if (damage >= playerDef) {
          targetCard.alive = false;
          log.innerHTML = `¬°${targetCard.name} fue eliminada!`;
          
          // Verificar si el jugador perdi√≥
          if (playerCards.filter(c => c.alive).length === 0) {
            endGame(false);
            return;
          }
        } else {
          log.innerHTML = `¬°${targetCard.name} resisti√≥ el ataque!`;
        }
        
        // Siguiente ronda
        round++;
        if (round > 5) {
          endGame(true);
        } else {
          setTimeout(() => startBattle(), 1500);
        }
      }, 800);
    }

    function endGame(isWin) {
      gameActive = false;
      const sound = isWin ? 'winSound' : 'loseSound';
      document.getElementById(sound).play();
      
      document.getElementById('battleArea').innerHTML = `
        <div style="text-align:center; padding:30px;">
          <h2 style="color:${isWin ? 'gold' : '#ff6b6b'}; text-shadow:0 0 10px ${isWin ? 'gold' : 'red'};">
            ${isWin ? 'üéâ ¬°VICTORIA ROYALE!' : 'üíÄ DERROTA'} 
          </h2>
          <p style="font-size:1.2em;">${isWin ? '¬°Derrotaste al Jefe Final!' : '¬°Todas tus cartas fueron eliminadas!'}</p>
          <button class="action-btn" onclick="location.reload()">üîÑ Jugar de Nuevo</button>
        </div>
      `;
    }

    // ‚ú® CONTADOR: MA√ëANA A LAS 15:00
    function updateUpdateCountdown() {
      const now = new Date();
      const target = new Date(now);
      target.setHours(15, 0, 0, 0); // 15:00 (3 PM)
      if (now >= target) {
        target.setDate(target.getDate() + 1);
      }
      const diff = target - now;
      const hours = Math.floor(diff / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);
      
      if (diff <= 0) {
        document.getElementById('updateTimer').innerText = '¬°Los cofres ya est√°n disponibles! üéÅ';
      } else {
        document.getElementById('updateTimer').innerText = 
          `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
      }
    }

    createParticles();
    updateUpdateCountdown();
    setInterval(updateUpdateCountdown, 1000);
    startBattle();
  </script>
</body>
</html>
