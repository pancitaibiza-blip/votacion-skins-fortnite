<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>üéÑ Fortnite Cartas CLOUD - MEGA UPDATE 101</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            background: radial-gradient(circle at center, #1a2a3a 0%, #050505 100%);
            background-attachment: fixed;
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }
        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1.5rem;
        }
        .view { display: none; animation: fadeIn 0.4s ease-out; }
        .view.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .nav-btn { color: rgba(255,255,255,0.4); transition: all 0.3s; position: relative; }
        .nav-btn.active { color: white; background: rgba(255, 255, 255, 0.1); transform: scale(1.1); }
        .nav-btn.active::after { content: ''; position: absolute; bottom: 15%; width: 4px; height: 4px; background: #06b6d4; border-radius: 50%; box-shadow: 0 0 10px #06b6d4; }

        /* RAREZAS */
        .rarity-common { border: 2px solid #94a3b8; }
        .rarity-rare { border: 2px solid #22c55e; }
        .rarity-epic { border: 2px solid #a855f7; }
        .rarity-legendary { border: 2px solid #f97316; }
        .rarity-idolos { border: 2px solid #ec4899; }
        .rarity-paises { border: 2px solid #3b82f6; }
        .rarity-tournament { border: 2px solid #6366f1; box-shadow: 0 0 10px #6366f1; }
        .rarity-animated { border: 2px solid #fbbf24; box-shadow: 0 0 15px rgba(251, 191, 36, 0.4); }
        .rarity-actricesporno { border: 2px solid #ef4444; box-shadow: 0 0 20px rgba(239, 68, 68, 0.5); }

        .card-vertical {
            aspect-ratio: 2 / 3;
            width: 100%;
            position: relative;
            overflow: hidden;
            border-radius: 1rem;
        }

        #loading-screen { position: fixed; inset: 0; background: #050505; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .spinner { width: 50px; height: 50px; border: 5px solid rgba(255,255,255,0.1); border-top-color: #06b6d4; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        .chat-container::-webkit-scrollbar { width: 4px; }
        .chat-container::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }

        .animate-scroll { animation: scroll 40s linear infinite; }
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

        #attack-reveal-overlay {
            display: none; position: fixed; inset: 0; z-index: 100; background: rgba(0,0,0,0.6);
            backdrop-filter: blur(8px); align-items: center; justify-content: center; pointer-events: none;
        }
        #attack-reveal-overlay.active { display: flex; }
        .reveal-card-anim { animation: cardReveal 1.5s cubic-bezier(0.17, 0.89, 0.32, 1.28) forwards; }
        @keyframes cardReveal {
            0% { transform: scale(0) rotate(-20deg); opacity: 0; }
            20% { transform: scale(1.1) rotate(5deg); opacity: 1; }
            80% { transform: scale(1) rotate(0deg); opacity: 1; }
            100% { transform: scale(1.5) translateY(-50px); opacity: 0; }
        }
    </style>
</head>
<body>

    <div id="loading-screen">
        <div class="spinner mb-6"></div>
        <h2 class="text-xl font-black uppercase italic tracking-widest animate-pulse">Cargando 101 Cartas...</h2>
    </div>

    <div id="attack-reveal-overlay">
        <div class="flex flex-col items-center reveal-card-anim">
            <h3 id="reveal-text" class="text-2xl font-black italic uppercase text-yellow-400 mb-6 drop-shadow-[0_0_20px_rgba(251,191,36,0.8)] text-center px-4"></h3>
            <div id="reveal-card-box" class="w-64 aspect-[2/3] glass-panel p-2 overflow-hidden shadow-[0_0_50px_rgba(255,255,255,0.3)]">
                <img id="reveal-img" src="" class="w-full h-full object-cover rounded-2xl">
            </div>
        </div>
    </div>

    <div class="fixed top-0 inset-x-0 h-10 bg-gradient-to-r from-red-900 to-indigo-900 z-[60] flex items-center overflow-hidden border-b border-white/20 shadow-lg">
        <div class="animate-scroll flex gap-12 font-black text-[10px] uppercase tracking-widest px-4 text-white">
            <span>üî• GRAN ACTUALIZACI√ìN: 101 CARTAS NUEVAS</span>
            <span>üì∫ REPLAYS Y NOTICIAS ACTIVADAS</span>
            <span>üéÅ GEMAS GRATIS EN LA TIENDA</span>
        </div>
    </div>

    <div class="container mx-auto px-4 pt-16 pb-32">
        <header class="flex flex-col items-center mb-8">
            <img id="u-avatar" src="" class="w-24 h-24 rounded-full border-4 border-white shadow-2xl object-cover bg-black" />
            <div class="flex items-center gap-2 mt-4">
                <span id="u-clan" class="clan-tag text-lg hidden"></span>
                <h2 id="u-name" class="text-3xl font-black italic uppercase tracking-tighter text-white">Jugador</h2>
            </div>
            <div class="grid grid-cols-3 gap-2 w-full max-w-md mt-6">
                <div class="glass-panel p-3 text-center"><span class="text-[7px] text-white/40 block uppercase">Trofeos</span><div id="v-trophies" class="text-yellow-400 font-black text-lg">0</div></div>
                <div class="glass-panel p-3 text-center"><span class="text-[7px] text-white/40 block uppercase">Gemas</span><div id="v-diamonds" class="text-cyan-400 font-black text-lg">0</div></div>
                <div class="glass-panel p-3 text-center"><span class="text-[7px] text-white/40 block uppercase">Copas</span><div id="v-cups" class="text-orange-400 font-black text-lg">0</div></div>
            </div>
        </header>

        <section id="view-news" class="view active">
            <div id="news-container" class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"></div>
        </section>

        <section id="view-clans" class="view">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="glass-panel p-6">
                    <div id="clans-list" class="space-y-2 max-h-96 overflow-y-auto chat-container"></div>
                    <button onclick="clans.showCreate()" class="w-full mt-4 py-3 bg-white/10 rounded-xl font-black uppercase text-[10px]">Crear Clan</button>
                </div>
                <div class="glass-panel p-6 lg:col-span-2 flex flex-col h-[500px]">
                    <div id="clan-chat-box" class="flex-1 overflow-y-auto space-y-4 chat-container mb-4"></div>
                    <div class="flex gap-2">
                        <input id="clan-msg-input" type="text" placeholder="Escribir..." class="flex-1 bg-black/40 border border-white/10 p-3 rounded-xl outline-none text-white text-xs" />
                        <button onclick="clans.sendMsg()" class="w-12 h-12 bg-cyan-500 rounded-xl text-white"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>
        </section>

        <section id="view-battle" class="view">
            <div id="battle-lobby" class="glass-panel p-10 text-center max-w-lg mx-auto">
                <button onclick="multiplayer.join('', false, true)" class="w-full py-4 bg-cyan-500 rounded-xl font-black uppercase italic text-white">ENTRENAR VS BOT ü§ñ</button>
            </div>
            <div id="battle-arena" class="hidden space-y-4 max-w-4xl mx-auto">
                <div class="glass-panel p-4 border-2 border-red-500/20">
                    <div class="flex items-center gap-4 mb-4">
                        <img id="rival-avatar" src="" class="w-12 h-12 rounded-full object-cover" />
                        <div class="flex-1">
                            <div class="flex justify-between font-black text-[10px]"><span id="rival-full-name">...</span><span id="rival-hp-text">100 HP</span></div>
                            <div class="w-full bg-black h-2 rounded-full overflow-hidden"><div id="rival-hp-bar" class="h-full bg-red-600 transition-all duration-500"></div></div>
                        </div>
                    </div>
                </div>
                <div id="battle-status" class="text-center font-black uppercase italic text-cyan-400 h-8"></div>
                <div class="glass-panel p-4 border-2 border-cyan-500/20">
                    <div id="player-battle-deck" class="grid grid-cols-3 gap-3 max-w-[300px] mx-auto"></div>
                </div>
            </div>
        </section>

        <section id="view-deck" class="view">
            <div id="deck-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6"></div>
        </section>

        <section id="view-shop" class="view">
            <div class="text-center mb-8"><button onclick="shop.claimMegaGift()" class="px-8 py-4 bg-yellow-400 text-black font-black rounded-2xl uppercase">üéÅ 1,000,000 GEMAS</button></div>
            <div id="shop-items" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6"></div>
        </section>
    </div>

    <nav class="fixed bottom-0 inset-x-0 h-20 bg-black/90 border-t border-white/10 flex items-center justify-around z-50">
        <button onclick="router.navigate('news')" class="nav-btn flex flex-col items-center"><i class="fas fa-home"></i><span class="text-[7px] font-black uppercase">Home</span></button>
        <button onclick="router.navigate('battle')" class="nav-btn flex flex-col items-center"><i class="fas fa-swords"></i><span class="text-[7px] font-black uppercase">Duelo</span></button>
        <button onclick="router.navigate('clans')" class="nav-btn flex flex-col items-center"><i class="fas fa-shield-alt"></i><span class="text-[7px] font-black uppercase">Clan</span></button>
        <button onclick="router.navigate('deck')" class="nav-btn flex flex-col items-center"><i class="fas fa-layer-group"></i><span class="text-[7px] font-black uppercase">Mazo</span></button>
        <button onclick="router.navigate('shop')" class="nav-btn flex flex-col items-center"><i class="fas fa-shopping-bag"></i><span class="text-[7px] font-black uppercase">Shop</span></button>
    </nav>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, onValue, update, remove, push, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAgYrcmcSzz2umxAUp5UqCL3pgNKKR08lU",
            authDomain: "juego-de-cartas-f7284.firebaseapp.com",
            projectId: "juego-de-cartas-f7284",
            storageBucket: "juego-de-cartas-f7284.firebasestorage.app",
            messagingSenderId: "702565143174",
            appId: "1:702565143174:web:48a7def7e76a1e9c907707",
            databaseURL: "https://juego-de-cartas-f7284-default-rtdb.firebaseio.com"
        };

        const fbApp = initializeApp(firebaseConfig);
        const db = getDatabase(fbApp);

        const ALL_CARDS = [
            { id: 0, name: "Ram√≠rez", rarity: "common", baseAtk: 60, baseDef: 50, level: 1, img: "https://s93.erome.com/5472/K3IRZbxx/Y8DPmT76.jpeg?v=1764825894", shopPrice: 50 },
            { id: 1, name: "Fortaleza", rarity: "rare", baseAtk: 60, baseDef: 70, level: 1, img: "https://s93.erome.com/5472/K3IRZbxx/1FvcJ5u7.png?v=1764809177", shopPrice: 100 },
            { id: 2, name: "Escudera", rarity: "common", baseAtk: 55, baseDef: 65, level: 1, img: "https://s93.erome.com/5472/K3IRZbxx/9RweIpam.jpeg?v=1764813677", shopPrice: 50 },
            { id: 3, name: "Azulita", rarity: "rare", baseAtk: 70, baseDef: 55, level: 1, img: "https://s93.erome.com/5472/K3IRZbxx/0B8OzReu.jpeg?v=1764815871", shopPrice: 80 },
            { id: 4, name: "Tormenta", rarity: "epic", baseAtk: 80, baseDef: 45, level: 1, img: "https://s93.erome.com/5472/K3IRZbxx/7GmdJa3U.jpeg?v=1764802552", shopPrice: 120 },
            { id: 5, name: "Furia", rarity: "legendary", baseAtk: 90, baseDef: 40, level: 1, img: "https://s93.erome.com/5472/K3IRZbxx/LsMURibY.jpeg?v=1764812622", shopPrice: 200 },
            { id: 6, name: "Asesina", rarity: "legendary", baseAtk: 95, baseDef: 30, level: 1, img: "https://s206.erome.com/4699/lpRzYjBO/Z5Tc5k2v.jpeg?v=1745795818", shopPrice: 250 },
            { id: 7, name: "Francine Smith", rarity: "legendary", baseAtk: 110, baseDef: 70, level: 1, img: "https://wimg.rule34.xxx//images/1888/0334e8239c387a302348c01810815aef.jpeg?15738062", shopPrice: 1000 },
            { id: 11, name: "Campe√≥n Sombra", rarity: "tournament", baseAtk: 140, baseDef: 100, level: 1, img: "https://s100.erome.com/2418/B2TgruwR/61zc8Veb.png?v=1712563892", shopPrice: null },
            { id: 12, name: "Maestro del Fuego", rarity: "tournament", baseAtk: 150, baseDef: 90, level: 1, img: "https://s326.erome.com/5139/YBnb1NTO/pN2evqNZ.jpeg?v=1750357395", shopPrice: null },
            { id: 13, name: "Rey del Hielo", rarity: "tournament", baseAtk: 135, baseDef: 110, level: 1, img: "https://s10.erome.com/6694/EUAdAxk1/1zdVPLQh.jpeg?v=1764732026", shopPrice: null },
            { id: 14, name: "Felina", rarity: "epic", baseAtk: 85, baseDef: 50, level: 1, img: "https://rule34.xxx//samples/2288/sample_ce3c07d28a9fdd2475d6fc67df8ff4e4.jpg?15302020", shopPrice: 300 },
            { id: 16, name: "Serenade", rarity: "epic", baseAtk: 85, baseDef: 50, level: 1, img: "https://rule34.xxx//samples/3001/sample_59915a49be3c0b2a86030615f562d3c1.jpg?15147757", shopPrice: 700 },
            { id: 17, name: "Cammy and Chun-Li", rarity: "epic", baseAtk: 85, baseDef: 50, level: 1, img: "https://rule34.xxx//samples/714/sample_799c5e73f8d6f088e9a1930fe6d3f791.jpg?15175590", shopPrice: 700 },
            { id: 18, name: "Briar", rarity: "epic", baseAtk: 85, baseDef: 50, level: 1, img: "https://rule34.xxx//samples/2510/sample_ea2393689e00c9127748cc78a08ef6b5.jpg?15205865", shopPrice: 700 },
            { id: 19, name: "Torrenta", rarity: "epic", baseAtk: 85, baseDef: 50, level: 1, img: "https://rule34.xxx//samples/1506/sample_b060c3279b1a9b0a7da0e19bb15fa2d5.jpg?15273482", shopPrice: 700 },
            { id: 20, name: "Siren", rarity: "epic", baseAtk: 85, baseDef: 50, level: 1, img: "https://rule34.xxx//samples/1766/sample_0e848cee467407d1da3fd407bbf6e484.jpg?15276598", shopPrice: 700 },
            { id: 21, name: "Sabrina Carpente La Diva", rarity: "idolos", baseAtk: 120, baseDef: 80, level: 1, img: "https://i.pinimg.com/736x/4d/c9/b3/4dc9b3acdf2ab04c3c783d3fb2730a0c.jpg", shopPrice: 2000 },
            { id: 22, name: "Carmela", rarity: "paises", baseAtk: 100, baseDef: 60, level: 1, img: "https://i.pinimg.com/736x/e1/e6/d2/e1e6d2425088933b0ee2751dd578a3c2.jpg", shopPrice: 500 },
            { id: 23, name: "Amy Wong Thicc", rarity: "epic", baseAtk: 88, baseDef: 55, level: 1, img: "https://rule34.xxx//samples/2701/sample_eae1882d43a188cdcbb129ca7ad3e12e.jpg?14901475", shopPrice: 400 },
            { id: 24, name: "Neon Strike", rarity: "epic", baseAtk: 90, baseDef: 50, level: 1, img: "https://rule34.xxx//samples/902/sample_2e1d3d88982219e96d1bb68453e57b27.jpg?14884672", shopPrice: 450 },
            { id: 25, name: "Beach Rebel", rarity: "epic", baseAtk: 85, baseDef: 60, level: 1, img: "https://rule34.xxx//samples/2019/sample_fd1e4fb4f37cab745ed074ee637ee911.jpg?14877326", shopPrice: 500 },
            { id: 26, name: "Panda Girl", rarity: "epic", baseAtk: 82, baseDef: 58, level: 1, img: "https://rule34.xxx//samples/1674/sample_9c2a1dc61194fef31518afef6288438d.jpg?14876583", shopPrice: 550 },
            { id: 27, name: "Beach Blonde", rarity: "epic", baseAtk: 92, baseDef: 48, level: 1, img: "https://rule34.xxx//samples/890/sample_ce7401fb27ce9a94e218feb294e9d107.jpg?14851213", shopPrice: 600 },
            { id: 28, name: "Wonder Slut", rarity: "epic", baseAtk: 95, baseDef: 45, level: 1, img: "https://rule34.xxx//samples/890/sample_5007ec807529d5075eebb9fc67df9f09.jpg?14851228", shopPrice: 650 },
            { id: 29, name: "Samurai Blue", rarity: "epic", baseAtk: 87, baseDef: 62, level: 1, img: "https://wimg.rule34.xxx//images/2149/86cb609ba898ff4285cfe105c5237f1a.png?14777959", shopPrice: 700 },
            { id: 30, name: "Pink Facesit", rarity: "epic", baseAtk: 80, baseDef: 65, level: 1, img: "https://rule34.xxx//samples/1545/sample_6ebdf1e38f29cb2e1d1cda76622fea1c.jpg?14763252", shopPrice: 750 },
            { id: 31, name: "D.Va & Uraraka", rarity: "epic", baseAtk: 93, baseDef: 52, level: 1, img: "https://rule34.xxx//samples/2122/sample_cadb0b375ac7de3414d0db39d552e7d4.jpg?14666699", shopPrice: 800 },
            { id: 32, name: "Laguna", rarity: "epic", baseAtk: 89, baseDef: 55, level: 1, img: "https://rule34.xxx//samples/842/sample_727d3f80cc43d197f3977fb5c9dfdc22.jpg?14662037", shopPrice: 850 },
            { id: 33, name: "Facesit Dominatrix", rarity: "epic", baseAtk: 94, baseDef: 50, level: 1, img: "https://rule34.xxx//samples/2314/sample_6bdcff4bfa032aed2751a5370a24cf05.jpg?14637455", shopPrice: 900 },
            { id: 34, name: "LolaLolita", rarity: "idolos", baseAtk: 140, baseDef: 90, level: 1, img: "https://s204.erome.com/2280/sMLLJHdM/kYJtDcuQ.jpeg?v=1709700685", shopPrice: 2500 },
            { id: 35, name: "DemonMika", rarity: "idolos", baseAtk: 145, baseDef: 85, level: 1, img: "https://s206.erome.com/3439/knzX8RV6/qi2fnmtw.jpeg?v=1730822823", shopPrice: 2800 },
            { id: 36, name: "Alejandra", rarity: "idolos", baseAtk: 150, baseDef: 100, level: 1, img: "https://i.pinimg.com/736x/e1/e6/d2/e1e6d2425088933b0ee2751dd578a3c2.jpg", shopPrice: 3000 },
            { id: 37, name: "Mu√±eca Simpsons", rarity: "legendary", baseAtk: 115, baseDef: 75, level: 1, img: "https://wimg.rule34.xxx/images/1370/e31706328b6ffa7e207dbb2df991f116.gif", shopPrice: 1500 },
            { id: 38, name: "Princesa Peach", rarity: "legendary", baseAtk: 130, baseDef: 85, level: 1, img: "https://files.catbox.moe/0k9j2p.gif", shopPrice: 2000 },
            { id: 39, name: "Braixen Thicc Rider", rarity: "animated", baseAtk: 140, baseDef: 90, level: 1, img: "https://wimg.rule34.xxx/images/1620/752edf7523feb1cfac185fd1cf2a0785.gif", shopPrice: null },
            { id: 40, name: "Espeon Gym Thrust", rarity: "animated", baseAtk: 145, baseDef: 85, level: 1, img: "https://wimg.rule34.xxx/images/617/c15df1e76636ca51743b135ad3817685.gif", shopPrice: null },
            { id: 41, name: "Sylveon Forest Bounce", rarity: "animated", baseAtk: 135, baseDef: 95, level: 1, img: "https://wimg.rule34.xxx/images/701/e6fb4ba874eced64a960455ed6c03770.gif", shopPrice: null },
            { id: 42, name: "Otaku Girl", rarity: "animated", baseAtk: 500, baseDef: 120, level: 1, img: "https://wimg.rule34.xxx/images/3636/2238fbcefc001a701fe5e1f8c5236fe5.gif", shopPrice: 1800 },
            { id: 43, name: "Belle Beast Ride", rarity: "animated", baseAtk: 150, baseDef: 90, level: 1, img: "https://cdn2.hentaigifz.com/116588/belle-from-beauty-and-the-beast-scaled.webp", shopPrice: null },
            { id: 44, name: "Emo Bad Belle", rarity: "animated", baseAtk: 140, baseDef: 95, level: 1, img: "https://cdn2.hentaigifz.com/116536/emo-scaled.webp", shopPrice: null },
            { id: 45, name: "Betty Boop Tease", rarity: "animated", baseAtk: 145, baseDef: 85, level: 1, img: "https://cdn2.hentaigifz.com/116498/betty-boop-scaled.webp", shopPrice: null },
            { id: 46, name: "Dexter's Mom Beach", rarity: "animated", baseAtk: 1200, baseDef: 1000, level: 1, img: "https://cdn2.hentaigifz.com/116308/dm-scaled.webp", shopPrice: 2500 },
            { id: 47, name: "Keqing Thicc Ride", rarity: "animated", baseAtk: 1200, baseDef: 1000, level: 1, img: "https://cdn2.hentaigifz.com/116288/hentai-scaled.webp", shopPrice: 2500 },
            { id: 48, name: "Leona Gym Thrust", rarity: "animated", baseAtk: 1200, baseDef: 1000, level: 1, img: "https://cdn2.hentaigifz.com/116388/tmr-scaled.webp", shopPrice: 2500 },
            { id: 49, name: "Strange Hero Facesit", rarity: "animated", baseAtk: 1200, baseDef: 1000, level: 1, img: "https://cdn2.hentaigifz.com/116364/strangeh-scaled.webp", shopPrice: 2500 },
            { id: 50, name: "Busting The Fuck Out", rarity: "animated", baseAtk: 5000, baseDef: 2500, level: 1, img: "https://cdn2.hentaigifz.com/115480/busting-the-fuck-out-scaled.webp", shopPrice: 5000 },
            { id: 51, name: "Motoko Kusanagi Ride", rarity: "animated", baseAtk: 1600, baseDef: 1100, level: 1, img: "https://cdn2.hentaigifz.com/114768/fantasy-fuck-scaled.webp", shopPrice: 2800 },
            { id: 52, name: "Nezuko Asshole Fuck", rarity: "animated", baseAtk: 1700, baseDef: 1050, level: 1, img: "https://cdn2.hentaigifz.com/114338/id-fuck-the-hell-out-of-nezukos-asshole-scaled.webp", shopPrice: 2900 },
            { id: 53, name: "Eirin Yagokoro Dildo", rarity: "animated", baseAtk: 1550, baseDef: 1150, level: 1, img: "https://cdn2.hentaigifz.com/115486/bucketheadero-eirin-yagokoro-touhou-scaled.webp", shopPrice: 2700 },
            { id: 54, name: "Jessie Ass Throw", rarity: "animated", baseAtk: 1650, baseDef: 1200, level: 1, img: "https://cdn2.hentaigifz.com/115328/jessie-throwing-that-ass-way-out-scaled.webp", shopPrice: 2850 },
            { id: 55, name: "Raven Big Ass", rarity: "animated", baseAtk: 1800, baseDef: 1000, level: 1, img: "https://cdn2.hentaigifz.com/115298/raven-big-ass-scaled.webp", shopPrice: 3000 },
            { id: 56, name: "Strapon Futa", rarity: "animated", baseAtk: 1750, baseDef: 1080, level: 1, img: "https://cdn2.hentaigifz.com/115150/strapon-scaled.webp", shopPrice: 2950 },
            { id: 57, name: "Bubblegum Tit Shake", rarity: "animated", baseAtk: 1500, baseDef: 1300, level: 1, img: "https://cdn2.hentaigifz.com/115728/by-dabbledraws-bubblegum-shakes-her-huge-tits-scaled.webp", shopPrice: 2600 },
            { id: 58, name: "Vinyl Luna Smirk", rarity: "animated", baseAtk: 1680, baseDef: 1120, level: 1, img: "https://cdn2.hentaigifz.com/115614/smirk-scaled.webp", shopPrice: 2880 },
            { id: 59, name: "Best Nelson Ride", rarity: "animated", baseAtk: 1900, baseDef: 950, level: 1, img: "https://cdn2.hentaigifz.com/115978/best-nelson-scaled.webp", shopPrice: 3100 },
            { id: 60, name: "Dragon Momma Slut", rarity: "animated", baseAtk: 2000, baseDef: 900, level: 1, img: "https://cdn2.hentaigifz.com/116346/dragon-momma-slut-chelodoy-scaled.webp", shopPrice: 3200 },
            { id: 61, name: "Samantha Bounce", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/113850/gif-samantha-1-scaled.webp", shopPrice: 4000 },
            { id: 62, name: "Tracer Riding", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/113896/tracer-ridingirastris-ii-scaled.webp", shopPrice: 4000 },
            { id: 63, name: "Jane Jetson MILF", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/114176/milf-scaled.webp", shopPrice: 4000 },
            { id: 64, name: "Blonde Ahegao", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/114102/blonde-scaled.webp", shopPrice: 4000 },
            { id: 65, name: "Mommy's Milk", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/114104/mommys-milk-scaled.webp", shopPrice: 4000 },
            { id: 66, name: "Modeus Tight Fuck", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/114096/hentai-fuck-tight-pussy-with-big-tits-scaled.webp", shopPrice: 4000 },
            { id: 67, name: "Family Guy XXXmas", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/114026/holy-crap-xxxmas-scaled.webp", shopPrice: 4000 },
            { id: 68, name: "Harness Pussy Fuck", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/114034/pussy-hentai-fuck-scaled.webp", shopPrice: 4000 },
            { id: 69, name: "Lisa Footjob", rarity: "legendary", baseAtk: 105, baseDef: 60, level: 1, img: "https://cdn.truyen-hentai.com/lisa-genshin-impact?interlace=1&quality=90&type=jpeg&url=https%3A%2F%2Fi.redd.it%2F2rhrtyfu486g1.jpeg&width=920&sign=fT55BfklnZBR2KbkAiywdF3fKOyO99UCruuDvfceJcs", shopPrice: 500 },
            { id: 71, name: "Susan Long MILF", rarity: "animated", baseAtk: 1600, baseDef: 1000, level: 1, img: "https://cdn2.hentaigifz.com/116566/hentai-milf-susan-long-american-dragon-jake-long-scaled.webp", shopPrice: 3000 },
            { id: 72, name: "TMR Thicc", rarity: "animated", baseAtk: 1600, baseDef: 1000, level: 1, img: "https://cdn2.hentaigifz.com/116442/tmr-scaled.webp", shopPrice: 3000 },
            { id: 73, name: "Jinx League of Legends", rarity: "legendary", baseAtk: 110, baseDef: 70, level: 1, img: "https://rule34.xxx//samples/3971/sample_2da1c8ff33fe588f243910961ed11a06.jpg?13091729", shopPrice: 1200 },
            { id: 74, name: "Ahri Fox Legend", rarity: "legendary", baseAtk: 110, baseDef: 70, level: 1, img: "https://rule34.xxx//samples/2954/sample_2386105dbcb97ac0248cc3ea8500b84a.jpg?13155724", shopPrice: 1200 },
            { id: 75, name: "Seraphine Popstar", rarity: "legendary", baseAtk: 110, baseDef: 70, level: 1, img: "https://rule34.xxx//samples/4746/sample_37fa548a5434c088e9a1930fe6d3f791.jpg?13157246", shopPrice: 1200 },
            { id: 76, name: "Sonia Pokemon Thicc", rarity: "legendary", baseAtk: 110, baseDef: 70, level: 1, img: "https://rule34.xxx//samples/3480/sample_bcffd58f4d3323097bff61a131fefcf7.jpg?13212611", shopPrice: 1200 },
            { id: 77, name: "Eula Genshin Impact", rarity: "legendary", baseAtk: 110, baseDef: 70, level: 1, img: "https://wimg.rule34.xxx//images/1177/99745673e25c63e0080cf6ddcf048f56.png?13214170", shopPrice: 1200 },
            { id: 78, name: "Noelle Genshin Thicc", rarity: "legendary", baseAtk: 110, baseDef: 70, level: 1, img: "https://rule34.xxx//samples/1177/sample_07014603b1bc2a1ee520415c2ce8bd60.jpg?13214737", shopPrice: 1200 },
            { id: 79, name: "Gwen Spider Thicc", rarity: "legendary", baseAtk: 110, baseDef: 70, level: 1, img: "https://rule34.xxx//samples/139/sample_c4fd8a7f5d51c72b9fc2b5136650e90c.jpg?15817313", shopPrice: 1200 },
            { id: 80, name: "Starfire Teen Titans", rarity: "legendary", baseAtk: 110, baseDef: 70, level: 1, img: "https://rule34.xxx//samples/368/sample_8237312d0b56c4a8bcd6b0f4b287c6da3b16140a.jpg?15828521", shopPrice: 1200 },
            { id: 81, name: "Raven Teen Titans Slut", rarity: "legendary", baseAtk: 110, baseDef: 70, level: 1, img: "https://rule34.xxx//samples/3787/sample_46e881b34ef3f92e8a012f9d2d351e28.jpg?15825868", shopPrice: 1200 },
            { id: 82, name: "Robin Teen Titans Thicc", rarity: "legendary", baseAtk: 110, baseDef: 70, level: 1, img: "https://rule34.xxx//samples/1227/sample_4af1e5c47506f9fbbe762fb71a2c3395.jpg?15824410", shopPrice: 1200 },
            { id: 83, name: "Big Tit Teen Fucking", rarity: "animated", baseAtk: 1600, baseDef: 1000, level: 1, img: "https://cdn2.hentaigifz.com/116478/big-tit-teen-fucking-scaled.webp", shopPrice: 3000 },
            { id: 84, name: "Sekis Thicc", rarity: "animated", baseAtk: 1600, baseDef: 1000, level: 1, img: "https://cdn2.hentaigifz.com/116488/sekis-scaled.webp", shopPrice: 3000 },
            { id: 85, name: "Hentai Ride Animated", rarity: "animated", baseAtk: 1600, baseDef: 1000, level: 1, img: "https://cdn2.hentaigifz.com/116444/hentai-scaled.webp", shopPrice: 3000 },
            { id: 86, name: "Big Tits Hentai Gif", rarity: "animated", baseAtk: 1600, baseDef: 1000, level: 1, img: "https://cdn2.hentaigifz.com/116430/big-tits-hentai-gif-scaled.webp", shopPrice: 3000 },
            { id: 87, name: "Babe Animated", rarity: "animated", baseAtk: 1600, baseDef: 1000, level: 1, img: "https://cdn2.hentaigifz.com/116376/babe-scaled.webp", shopPrice: 3000 },
            { id: 88, name: "Rosal√≠a Motomami", rarity: "idolos", baseAtk: 155, baseDef: 105, level: 1, img: "https://media.vogue.es/photos/6282929aebc8221f41f20a50/2:3/w_1920,c_limit/SHOT_02_090_FINAL.jpg", shopPrice: 3200 },
            { id: 89, name: "Mmm Animated", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/114202/mmm-scaled.webp", shopPrice: 5500 },
            { id: 90, name: "Eighty-Five Animated", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/114046/85-scaled.webp", shopPrice: 5500 },
            { id: 91, name: "Princess Peach Tit Bounce", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/114432/princess-peach-bouncing-them-titties-scaled.webp", shopPrice: 5500 },
            { id: 92, name: "Demon Princess Meaty", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/114680/demon-princess-fucking-a-meaty-cock-scaled.webp", shopPrice: 5500 },
            { id: 93, name: "Nice Ass Fuck Animated", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/114454/nice-ass-fuck-scaled.webp", shopPrice: 5500 },
            { id: 94, name: "Automatass Animated", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/115204/automatass-scaled.webp", shopPrice: 5500 },
            { id: 95, name: "2B Perfect Ass Doggy", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/112817/2b-perfect-ass-doggy-style-3d-hentai-scaled.webp", shopPrice: 5500 },
            { id: 96, name: "Green Slime Cum Clothes", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/112481/green-slime-turns-clothes-to-cum-scaled.webp", shopPrice: 5500 },
            { id: 97, name: "Ass Animated Thicc", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/113095/ass-scaled.webp", shopPrice: 5500 },
            { id: 98, name: "Widowmaker Animated", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/113718/widowmaker-scaled.webp", shopPrice: 5500 },
            { id: 99, name: "Futa Madmew Redapple2", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/113534/futa-madmew-by-redapple2-scaled.webp", shopPrice: 5500 },
            { id: 100, name: "Tifa Blacked 3", rarity: "animated", baseAtk: 10000, baseDef: 5000, level: 1, img: "https://cdn2.hentaigifz.com/113370/tifa-blacked-3-scaled.webp", shopPrice: 5500 },
            { id: 101, name: "Milf Handjob Wet", rarity: "actricesporno", baseAtk: 12000, baseDef: 6000, level: 1, img: "https://s2.pictoa.com/media/galleries/269/410/269410603155505d89c/393371260315552a7156.gif", shopPrice: 7000 }
        ];

        window.state = null;
        const save = () => { localStorage.setItem('cards_master_name', window.state.name); renderGlobalUI(); set(ref(db, `users_v11/${window.state.name}`), window.state); };

        const initSession = async () => {
            let storedName = localStorage.getItem('cards_master_name') || prompt("Nombre:").toUpperCase();
            const snap = await get(ref(db, `users_v11/${storedName}`));
            window.state = snap.exists() ? snap.val() : { name: storedName, diamonds: 1000, trophies: 0, cups: 0, owned: [0, 1, 2], currentDeck: [0, 1, 2], avatar: 'https://picsum.photos/200' };
            save(); initNews(); document.getElementById('loading-screen').style.display = 'none';
        };

        const initNews = () => {
            onValue(ref(db, 'news_v11'), (s) => {
                const data = s.val() || {};
                document.getElementById('news-container').innerHTML = Object.entries(data).map(([id, n]) => `
                    <div class="glass-panel overflow-hidden border-cyan-500/20">
                        <img src="${n.img}" class="w-full h-40 object-cover">
                        <div class="p-4"><h3 class="font-black text-cyan-400 uppercase">${n.title}</h3><p class="text-[10px] opacity-60">${n.msg}</p></div>
                    </div>
                `).join('');
            });
        };

        window.router = {
            navigate: (view) => {
                document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
                document.getElementById('view-' + view).classList.add('active');
                if(view === 'deck') renderDeck();
                if(view === 'shop') renderShop();
            }
        };

        const renderDeck = () => {
            document.getElementById('deck-grid').innerHTML = window.state.owned.map(id => {
                const c = ALL_CARDS.find(x => x.id === id);
                return `
                    <div class="glass-panel p-2 rarity-${c.rarity}">
                        <div class="card-vertical mb-2"><img src="${c.img}" class="w-full h-full object-cover rounded"></div>
                        <div class="text-[8px] font-black truncate">${c.name}</div>
                    </div>
                `;
            }).join('');
        };

        window.shop = {
            claimMegaGift: () => { window.state.diamonds += 1000000; save(); alert("Gemas obtenidas üíé"); renderShop(); },
            buy: (id) => {
                const c = ALL_CARDS.find(x => x.id === id);
                if(window.state.diamonds >= c.shopPrice) {
                    window.state.diamonds -= c.shopPrice; window.state.owned.push(id); save(); renderShop();
                }
            }
        };

        const renderShop = () => {
            document.getElementById('shop-items').innerHTML = ALL_CARDS
                .filter(c => c.shopPrice !== null && !window.state.owned.includes(c.id))
                .slice(0,20).map(c => `
                <div class="glass-panel p-2 rarity-${c.rarity} flex flex-col">
                    <div class="card-vertical mb-2"><img src="${c.img}" class="w-full h-full object-cover rounded"></div>
                    <button onclick="shop.buy(${c.id})" class="mt-auto w-full py-2 bg-white text-black text-[8px] font-black rounded uppercase">üíé ${c.shopPrice}</button>
                </div>
            `).join('');
        };

        window.multiplayer = {
            data: null, role: 'p1',
            join: (c, f, bot) => {
                const me = { n: window.state.name, h: 100, a: window.state.avatar, deck: window.state.currentDeck.map(id => ALL_CARDS.find(x => x.id === id)) };
                const rival = { n: 'BOT', h: 100, a: 'https://picsum.photos/100', deck: [ALL_CARDS[0], ALL_CARDS[1], ALL_CARDS[2]] };
                window.multiplayer.data = { p1: me, p2: rival, status: 'playing', turn: 'p1' };
                document.getElementById('battle-lobby').classList.add('hidden');
                document.getElementById('battle-arena').classList.remove('hidden');
                window.multiplayer.sync();
            },
            sync: () => {
                const d = window.multiplayer.data;
                document.getElementById('rival-full-name').innerText = d.p2.n;
                document.getElementById('rival-hp-bar').style.width = d.p2.h + '%';
                document.getElementById('player-battle-deck').innerHTML = d.p1.deck.map(c => `
                    <div onclick="multiplayer.attack(${c.baseAtk}, '${c.name}', '${c.img}')" class="glass-panel p-1 aspect-[2/3] rarity-${c.rarity}">
                        <img src="${c.img}" class="w-full h-full object-cover rounded">
                    </div>
                `).join('');
            },
            showReveal: (name, img) => {
                const overlay = document.getElementById('attack-reveal-overlay');
                document.getElementById('reveal-text').innerText = `¬°ATAQUE CON ${name}!`;
                document.getElementById('reveal-img').src = img;
                overlay.classList.add('active');
                setTimeout(() => overlay.classList.remove('active'), 1500);
            },
            attack: (atk, name, img) => {
                window.multiplayer.showReveal(name, img);
                setTimeout(() => {
                    window.multiplayer.data.p2.h = Math.max(0, window.multiplayer.data.p2.h - 20);
                    window.multiplayer.sync();
                    if(window.multiplayer.data.p2.h <= 0) alert("¬°Ganaste!");
                }, 1500);
            }
        };

        const renderGlobalUI = () => {
            document.getElementById('u-name').innerText = window.state.name;
            document.getElementById('u-avatar').src = window.state.avatar;
            document.getElementById('v-diamonds').innerText = window.state.diamonds.toLocaleString();
            document.getElementById('v-trophies').innerText = window.state.trophies;
        };

        initSession();
    </script>
</body>
</html>
